<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="robots" content="noindex" />
    <title>Player</title>
    <script src="https://player.4shares.live/js/jwplayer/jwplayer.js"></script>
    <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"
      type="text/javascript"
    ></script>
    <style>
      body {
        overflow: hidden;
        margin: 0;
        padding: 0;
        background: #000;
        transform-origin: center;
      }

      #vbplayer {
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
      }

      .jwplayer {
        position: absolute !important;
      }

      .jw-button-container {
        padding: 0 !important;
        margin-top: -6px !important;
      }
    </style>
    <script>
      jwplayer.key = "7MeMRClEneUmFoHRO3u3ypzAZXlVgNtBE2pKDw==";
    </script>
  </head>
  <body>
    <div id="vbplayer"></div>
    <script>
      let jid = "vbplayer";
      var url = "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8";
      var userAgent = "";
      var referer = "";
      var urlParser = new URL(window.location.href);
      if (urlParser.searchParams.get("link")) {
        url = urlParser.searchParams.get("link");
      }
      if (urlParser.searchParams.get("userAgent")) {
        userAgent = urlParser.searchParams.get("userAgent");
      }
      if (urlParser.searchParams.get("referer")) {
        referer = urlParser.searchParams.get("referer");
      }
      var player = jwplayer(jid);
      var setupOptions = {
        sources: [{ file: url }],
        autostart: true,
        mute: false,
        preload: "auto",
        width: "100%",
        height: "100%",
        primary: "html5",
        withCredentials: false,
      };

      if (userAgent !== "" || referer !== "") {
        setupOptions.sources[0].headers = {};
        if (userAgent !== "") {
          setupOptions.sources[0].headers["User-Agent"] = userAgent;
        }
        if (referer !== "") {
          setupOptions.sources[0].headers["Referer"] = referer;
        }
      }
      player.setup(setupOptions);
    </script>
  </body>
</html>
